<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Runner (osnap.Osnap.Runner)</title><link rel="stylesheet" href="../../../odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 1.5.3"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../../highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body><div class="content"><header><nav><a href="../index.html">Up</a> â€“ <a href="../../index.html">osnap</a> &#x00BB; <a href="../index.html">Osnap</a> &#x00BB; Runner</nav><h1>Module <code>Osnap.Runner</code></h1><p>Runner has tree mode:</p><ul><li>Interactive:</li></ul><p>Interactive mode provides an interactive runner, displaying differences between old and new snapshots. Promoting new version is proposed at every diff, exit when new diff is not promoted, considered as an error.</p><p>Example:</p><pre><code class="ml">let test =
  let spec = OSnap.Spec.(int ^&gt; int ^&gt;&gt; int) in
  Osnap.Test.make ~count:1 ~path:&quot;.osnap/add&quot; ~spec (+)

(* .osnap/add:

   f 5 6 = 11; *)

(* Then, the function under test is update *)
let test =
  let spec = OSnap.Spec.(int ^&gt; int ^&gt;&gt; int) in
  Osnap.Test.make ~count:1 ~path:&quot;.osnap/add&quot; ~spec (fun _ _ -&gt; 0)

let _ = Runner.(run_tests ~mode:Interactive [test])

(* .osnap/add
   -| f 5 6 = 11;
   +| f 5 6 = 0

   Promote changes ? [Y\n] *)</code></pre><ul><li>Promote:</li></ul><p>Promote mode provides an automatic promotion of diffs.</p><p>Example:</p><pre><code class="ml">let test =
  let spec = OSnap.Spec.(int ^&gt; int ^&gt;&gt; int) in
  Osnap.Test.make ~count:1 ~path:&quot;.osnap/add&quot; ~spec (+)

(* .osnap/add:

   f 5 6 = 11; *)

(* Then, the function under test is update *)
let test =
  let spec = OSnap.Spec.(int ^&gt; int ^&gt;&gt; int) in
  Osnap.Test.make ~count:1 ~path:&quot;.osnap/add&quot; ~spec (fun _ _ -&gt; 0)

let _ = Runner.(run_tests ~mode:Promote [test])

(* .osnap/add has been promoted
   -| f 5 6 = 11;
   +| f 5 6 = 0
*)</code></pre><ul><li>Error:</li></ul><p>Error mode will raise errors on diffs.</p><pre><code class="ml">let test =
  let spec = OSnap.Spec.(int ^&gt; int ^&gt;&gt; int) in
  Osnap.Test.make ~count:1 ~path:&quot;.osnap/add&quot; ~spec (+)

(* .osnap/add:

   f 5 6 = 11; *)

(* Then, the function under test is update *)
let test =
  let spec = OSnap.Spec.(int ^&gt; int ^&gt;&gt; int) in
  Osnap.Test.make ~count:1 ~path:&quot;.osnap/add&quot; ~spec (fun _ _ -&gt; 0)

let _ = Runner.(run_tests ~mode:Promote [test])

(* .osnap/add has differences, exit
   -| f 5 6 = 11;
   +| f 5 6 = 0
*)</code></pre></header><dl><dt class="spec type" id="type-mode"><a href="#type-mode" class="anchor"></a><code><span class="keyword">type</span> mode</code><code> = </code><table class="variant"><tr id="type-mode.Interactive" class="anchored"><td class="def constructor"><a href="#type-mode.Interactive" class="anchor"></a><code>| </code><code><span class="constructor">Interactive</span></code></td><td class="doc"><p>Interactive mode, diffs will be displayed and ask for promote</p></td></tr><tr id="type-mode.Promote" class="anchored"><td class="def constructor"><a href="#type-mode.Promote" class="anchor"></a><code>| </code><code><span class="constructor">Promote</span></code></td><td class="doc"><p>Promote mode, will promote every diff</p></td></tr><tr id="type-mode.Error" class="anchored"><td class="def constructor"><a href="#type-mode.Error" class="anchor"></a><code>| </code><code><span class="constructor">Error</span></code></td><td class="doc"><p>Error mode, raises error on diff</p></td></tr></table></dt></dl><dl><dt class="spec value" id="val-run_tests"><a href="#val-run_tests" class="anchor"></a><code><span class="keyword">val</span> run_tests : <span>?&#8288;mode:<a href="index.html#type-mode">mode</a></span> <span>&#45;&gt;</span> <span><a href="../Test/index.html#type-t">Test.t</a> list</span> <span>&#45;&gt;</span> int</code></dt><dd><p><code>run_tests tests</code> executes <code>tests</code>, default mode is <code>Error</code>.</p></dd></dl></div></body></html>